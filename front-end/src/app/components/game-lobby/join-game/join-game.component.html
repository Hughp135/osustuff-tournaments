<div class="ui inverted segment">
  <div *ngIf="canJoin">
    <div *ngIf="inAnotherGame">
      <p>You are in another game, so you must leave before you can join.</p>
      <div class="ui tiny orange button" (click)="leaveGame()">
        Leave other game
      </div>
    </div>
    <div *ngIf="!inAnotherGame">
      <div *ngIf="!joinRequestId">

        <h5 class="ui inverted left floated header">
          Enter your osu! username to join this game!
        </h5>

        <div class="ui right floated small action input">
          <input type="text" placeholder="osu! username" [(ngModel)]="osuUsername" (keydown)="onKeyDown($event)">
          <button class="ui primary button" [disabled]="(osuUsername && osuUsername.length < 3) || requestingJoin"
            [class.loading]="requestingJoin" (click)="joinGame()">Join</button>
        </div>

        <p *ngIf="error" class="error">{{ error }}</p>
      </div>
      <div *ngIf="joinRequestId">
        <p>
          To join the game, send a message with the command "<b>!join</b>" in game to the
          user <b>Mongoose-</b>
          to verify your account.
          You have 60 seconds to do this.
        </p>
        <h5 class="ui inverted header">
          <i class="loading spinner icon"></i>
          Awaiting verification...
        </h5>
      </div>
    </div>
  </div>
  <div *ngIf="!canJoin">
    <p>
      This game is already in progress, so you can't join it.
      Wait for the next one to start!
    </p>
  </div>
</div>
